name: Github Action No.2

on:
  push:
     branches: ["main"]

permissions:
   contents: read
   pages: write
   id-token: write


jobs:
   build:
      runs-on: ubuntu-latest
         steps:
           - name: Checkout Code
             uses: actions/checkout@v3
           - name: Install node 16
             uses: actions/setup-node@v1
             with:
             node-version: 16.x
           - name: Install NPM Dependencies
             run: npm i
           - name: Build Project
             run: npm run build
           - name: Upload artifact in order to deploy
             uses: actions/upload-artifact@v2
             with:
             name: production-files
             path: ./build
    deploy: 
        runs-on: ubuntu-latest
        needs: build
        enviroment:
          name: github-pages
          url:  ${{ steps.deployment.outputs.page_url}}
        steps:
         - name: Deploy to Github pages
           id: deployment
           uses: actions/deploy-pages@v1